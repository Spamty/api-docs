---
title: Decryption API
excerpt: The current version of the Spamty decryption API. With this you can get an email address from a Spamty link.

layout: default
permalink: /decryption/

gh-file: api-decryption/v4.html

# Spamty API Doc <https://dev.spamty.eu/>
# Copyright (c) 2016 by Spamty team & contributors
# [CC BY-NC-ND] [GNU GPL v3] see LICENSE.md
---
<p>With this API you can get an email address from a Spamty link.</p>
<p>Current version: <strong>4.2</strong>. See <a href="{{site.url}}/decryption/changelog/">what changed</a>.</p>

<h2>URL</h2>
<p>The API is located at:</p>
<pre>https://api.spamty.eu/decryption/v4.php</pre>
<p>You have to use <a href="{{site.url}}/https/">HTTPS</a>. Please ignore the SSL warning, because our certificate is not validated.</p>

<h2>Authentication</h2>
<p>It is only for internal use. You need an additional authentication with HTTP Basic Auth.</p>
<pre class="prettyprint">
// HTTP Authentication
curl_setopt($ch, CURLOPT_USERPWD, "USERNAME:PASSWORD");
</pre>

<h2>Parameters</h2>
<p>Send a HTTP POST request to the URL with the following POST parameters:</p>
<p><code>m</code><br>
The <em>apiM</em> parameter of the encryption request (a number). For example: <a href="https://spamty.eu/mail/v4/20/869656557u8375992c/" target="_blank" rel="nofollow">https://spamty.eu/mail/v4/<strong>20</strong>/869656557u8375992c/</a></p>
<p><code>k</code><br>
The <em>apiK</em> parameter of the encryption request (a string with a-z A-z 0-9) For example: <a href="https://spamty.eu/mail/v4/20/869656557u8375992c/" target="_blank" rel="nofollow">https://spamty.eu/mail/v4/20/<strong>869656557u8375992c</strong>/</a></p>
<p><code>apiUser</code><br>
Your class <strong>D</strong> Username.</p>
<p><code>apiKey</code><br>
Your class <strong>D</strong> <a href="{{site.url}}/apikeys/">API Auth Code</a>.</p>
<p><code>output</code><br>
The output type ("json" or "xml" is currently supported, default is "json")</p>
<h3>Example</h3>
<pre class="prettyprint">
$data = array(
	// the parameters m, k
	// example link: https://spamty.eu/mail/v4/20/869656557u8375992c/
	'm'		=> '20',
	'k'		=> '869656557u8375992c',
	// api username and key
	// see: https://dev.spamty.eu/apikeys/
	'apiUser'	=> 'd_1234567891',
	'apiKey'	=> '12345678901234541678901234567890ab',
	// output type (xml or json)
	'output'	=> 'json'
);
</pre>

<h2>Return Values</h2>
<p>The request will return a JSON file with the following values:</p>
<p><code>status</code><br>
1 for OK and 0 if an error occurred.</p>
<p><code>statusDetails</code><br>
A description if there were any errors. Otherwise the value is "ok".</p>
<p><code>info</code><br>
The URL where you can get some additional information (this page)</p>
<p><code>version</code><br>
The version number.</p>
<p><code>email</code><br>
The email address</p>
<p><code>mailCheck</code><br>
A crc32b hash of the email address</p>
<h3>Examples</h3>
<h4>JSON - successful</h4>
<pre class="prettyprint">
{
  "info": "https://dev.spamty.eu/decryption/",
  "version": "4.2",
  "status": 1,
  "statusDetails": "ok",
  "email": "demo@spamty.eu",
  "mailCheck": "4ac3b36c"
}
</pre>
<h4>JSON - with error</h4>
<pre class="prettyprint">
{
  "info": "https://dev.spamty.eu/decryption/",
  "version": "4.2",
  "status": 0,
  "statusDetails": "Your API Key is wrong or invalid."
}
</pre>
<h4>XML - successful</h4>
<pre class="prettyprint">
&lt;spamty&gt;
  &lt;info&gt;https://dev.spamty.eu/decryption/&lt;/info&gt;
  &lt;version&gt;4.2&lt;/version&gt;
  &lt;status&gt;1&lt;/status&gt;
  &lt;statusDetails&gt;ok&lt;/statusDetails&gt;
  &lt;email&gt;demo@spamty.eu&lt;/email&gt;
  &lt;mailCheck&gt;4ac3b36c&lt;/mailCheck&gt;
&lt;/spamty&gt;
</pre>

<h2>Examples</h2>
<p>You can find a <a href="{{site.url}}/decryption/examples/">complete example here</a>.</p>


<h2>See Also</h2>
<ul>
	<li><a href="{{site.url}}/encryption/">API Encrypt</a></li>
	<li><a href="{{site.url}}/apikeys/">API Keys</a></li>
	<li><a href="{{site.url}}/decryption/changelog/">Changelog</a></li>
</ul>
<p>Please report any problems or feature requests at our <a href="{{site.url}}/contact/">via this form</a>.</p>
