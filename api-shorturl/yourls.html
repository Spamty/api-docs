---
title: Create a short URL - YOURLS' API
excerpt: With this API provided by YOURLS you can create a 3q3.de short URL from a Spamty link to an email address.

layout: default
permalink: /shorturl/

gh-file: api-shorturl/yourls.html

# Spamty API Doc (https://dev.spamty.eu/)
# Copyright (C) 2016 by Philipp & Spamty.eu
---
<p>With this API method you can create a short URL or view the long URL from a shortened Spamty link with 3q3.de.</p>
<p>We are using <a href="http://yourls.org/#API">YOURLS</a> <strong>version 1.7.1</strong> with some adaptions. See <a href="{{site.url}}/shorturl/changelog/" title="Changelog">what changed</a>.</p>

<h2>URL</h2>
<p>Use this URL for your HTTP POST request (we dropped support for GET):</p>
<pre>https://3q3.de/yourls-api.php</pre>
<p>You are recommended to use <a href="{{site.url}}/https/">HTTPS</a>.</p>


<h2>Parameters</h2>
<p>Send your HTTP POST request with these parameters:</p>
<p><code>signature</code><br>
This is the API key <b>class S</b> that <a href="{{site.url}}/apikeys/" title="API keys">can be requested here</a>.</p>
<p><code>timestamp</code><br>
An API key <b>class S</b> is valid for a limited time (currently for 6 months). You have to pass this parameter with the timesstamp you got from us with your API key. See <a href="https://github.com/YOURLS/YOURLS/wiki/PasswordlessAPI#usage-of-a-time-limited-signature-token">Passwordless API requests</a>.</p>
<p><code>action</code><br>
<tt>"shorturl"</tt> (get short URL for a link) or <tt>"expand"</tt> (get long URL of a shorturl)</p>
<p><code>url</code> (for action = "shorturl")<br>
The Spamty link to shorten (like <em><a href="https://spamty.eu/mail/v4/20/869656557u8375992c/" target="_blank" rel="nofollow">http://spamty.eu/mail/v4/20/869656557u8375992c/</a></em>).</p>
<p><code>keyword</code> and <code>title</code> parameters (for action = "shorturl") are not supported.</p>
<p><code>shorturl</code> (for action = "expand")<br>
the short URL to expand (can be either 'demo' or 'http://3q3.de/demo').</p>
<p><code>output</code><br>
The output format: either <tt>"jsonp"</tt>, <tt>"json"</tt>, <tt>"xml"</tt> or <tt>"simple"</tt>.</p>

<h2>Example Request</h2>
<h3>JavaScript</h3>
<p>Example request with Javascript (using jQuery) to shorten a URL</p>
<pre class="prettyprint">
var api_url  = 'https://3q3.de/yourls-api.php';
var response = $.post( api_url, {
    signature: "YOUR_SECRET_KEY",
    timestamp: "YOUR_TIMESTAMP",
    action:   "shorturl",
    format:   "json",
    url:      "http://spamty.eu/mail/v4/20/869656557u8375992c/"
    },
    // callback function that will deal with the server response
    function( data) {
        // for instance, return short URL
        return data.shorturl;
    }
);
</pre>

<h3>PHP</h3>
<p>Example request with PHP to view the long URL from a shortened one.</p>
<pre class="prettyprint">
&lt?php
$api_url =  'http://3q3.de/yourls-api.php';

// Init the CURL session
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $api_url);
curl_setopt($ch, CURLOPT_HEADER, 0);            // No header in the result
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); // Return, do not echo result
curl_setopt($ch, CURLOPT_POST, 1);              // This is a POST request
curl_setopt($ch, CURLOPT_POSTFIELDS, array(     // Data to POST
        'shorturl' => 'http://3q3.de/demo',
        'format'   => 'json',
        'action'   => 'expand',
        'signature'   => 'YOUR_SECRET_HERE',
        'timestamp'   => 'YOUR_TIMESTAMP',
    ));

// Fetch and return content
$data = curl_exec($ch);
curl_close($ch);

// Do something with the result. Here, we echo the long URL
$data = json_decode( $data );
echo $data->longurl;
</pre>


<h2>Return Values</h2>
<p>The request will return a response with the following data: (the returned values from YOURLS seem to be not very consistent. There is already an <a href="https://github.com/YOURLS/YOURLS/issues/1277">issue on GitHub for that</a>.)</p>
<p><code>status</code><br>
If successful this should be "success".</p>
<p><code>errorCode</code><br>
A numeric code if an error occurred. This is should be the same as the HTTP status code.</p>
<p><code>statusCode</code><br>
This has the value "200" if your request was successful. It is recommended to use this value to check validate if your request was successful.</p>
<p><code>message</code><br>
A long description of the error or a success message.</p>
<p><code>longurl</code><br>
The Spamty link (like <em> <a href="http://spamty.eu/mail/v4/20/869656557u8375992c/" target="_blank" rel="nofollow">http://spamty.eu/mail/v4/20/869656557u8375992c/</a> </em>)</p>

<h3>Example Response</h3>
<p>A JSON response could look like:</p>
<h4>Login error</h4>
<pre class="prettyprint">
{
  "message": "Please log in",
  "errorCode": 403,
  "callback": ""
}
</pre>
<h4>Invalid short URL</h4>
<pre class="prettyprint">
{
  "keyword": "demo2",
  "message": "Error: short URL not found",
  "errorCode": 404
}
</pre>
<h4>Successful request</h4>
<pre class="prettyprint">
{
  "keyword": "demo",
  "shorturl": "http://3q3.de/demo",
  "longurl": "http://spamty.eu/mail/v4/20/869656557u8375992c/",
  "title": "Demo Link (demo@spamty.eu)",
  "message": "success",
  "statusCode": 200
}
</pre>


<h2>See Also</h2>
<ul>
	<li>official <a href="http://yourls.org/#API" title="YOURLS API">YOURLS' API docs</a></li>
	<li><a href="https://github.com/YOURLS/YOURLS" title="GitHub">YOURLS on GitHub</a></li>
	<li><a href="{{site.url}}/shorturl/changelog/" title="Changelog">Changelog</a></li>
</ul>
<p>Please report any issues with this API or feature requests at our <a href="https://spamty.eu/contact-dev.php">via this form</a>.</p>
